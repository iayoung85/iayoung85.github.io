<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Transaction Viewer - Bank Transactions</title>
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js"></script>
  <link rel="stylesheet" href="transactions.css">
</head>
<body>
  <div class="container">
    <a href="index.html" class="back-link">← Back to Dashboard</a>
    
    <h1>Transaction Viewer</h1>
    
    <!-- Configuration Panel -->
    <div class="config-panel">
      <div class="config-header" onclick="toggleConfig()">
        <span>Configuration</span>
        <span id="toggle-icon">▼</span>
      </div>
      <div class="config-content" id="config-content">
        
        <!-- Bank & Account Selection -->
        <div class="config-section">
          <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
            <h3 style="margin: 0;">Select Accounts</h3>
            <button onclick="refreshAccounts()" class="secondary" style="padding: 4px 8px; font-size: 12px;">Refresh List</button>
          </div>
          <div id="account-selector"></div>
        </div>
        
        <!-- Date Range -->
        <div class="config-section">
          <h3>Date Range (1-60 days)</h3>
          <input type="date" id="start-date">
          <input type="date" id="end-date">
        </div>
        
        <!-- Timezone -->
        <div class="config-section">
          <h3>Timezone</h3>
          <select id="timezone">
            <option value="America/New_York">Eastern Time (ET)</option>
            <option value="America/Chicago" selected>Central Time (CT)</option>
            <option value="America/Denver">Mountain Time (MT)</option>
            <option value="America/Los_Angeles">Pacific Time (PT)</option>
            <option value="UTC">UTC</option>
          </select>
        </div>

        <!-- Optional Fields -->
        <div class="config-section">
          <h3>Optional Fields</h3>
          <div class="optional-fields-grid">
            <label><input type="checkbox" class="field-checkbox" value="merchant_name"> Merchant Name</label>
            <label><input type="checkbox" class="field-checkbox" value="category"> Category</label>
            <label><input type="checkbox" class="field-checkbox" value="payment_channel"> Payment Channel</label>
            <label><input type="checkbox" class="field-checkbox" value="pending"> Pending Status</label>
            <label><input type="checkbox" class="field-checkbox" value="check_number"> Check Number</label>
            <label><input type="checkbox" class="field-checkbox" value="original_description"> Original Description</label>
            <label><input type="checkbox" class="field-checkbox" value="authorized_date"> Authorized Date</label>
            <label><input type="checkbox" class="field-checkbox" value="authorized_datetime"> Authorized Time</label>
          </div>
        </div>
        
        <!-- Action Buttons -->
        <div class="config-section">
          <button onclick="syncTransactions()">Sync Transactions</button>
          <button onclick="loadTransactions()" id="load-btn" disabled>Load Data</button>
          <div id="status-message"></div>
        </div>
        
      </div>
    </div>
    
    <!-- Transaction Table -->
    <div id="table-container">
      <div class="empty-state">
        Configure your settings above and click "Sync Transactions" to get started.
      </div>
    </div>
    
    <!-- Export Buttons -->
    <div class="export-buttons hidden" id="export-buttons">
      <button onclick="exportJSON()">Export JSON</button>
      <button onclick="copyCSV()">Copy CSV to Clipboard</button>
      <button onclick="downloadCSV()">Download CSV</button>
    </div>
    
  </div>

  <script src="transactions.js"></script>
</body>
</html>
